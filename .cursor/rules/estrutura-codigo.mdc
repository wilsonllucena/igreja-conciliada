---
alwaysApply: true
---
# EstruturaÃ§Ã£o e OrganizaÃ§Ã£o do CÃ³digo

## Limites e DivisÃ£o

### Arquivos
- **MÃ¡ximo 200-300 linhas por arquivo**
- Quando um arquivo ultrapassar este limite, REFATORE em arquivos menores
- Mantenha responsabilidades bem definidas por arquivo

### FunÃ§Ãµes
- **MÃ¡ximo 20-30 linhas por funÃ§Ã£o**
- FunÃ§Ãµes que crescem alÃ©m disso devem ser divididas em funÃ§Ãµes menores
- Uma funÃ§Ã£o = uma responsabilidade

## PrincÃ­pios de OrganizaÃ§Ã£o

### 1. Responsabilidade Ãšnica
- Cada mÃ³dulo, classe e funÃ§Ã£o deve ter apenas uma razÃ£o para mudar
- Separe claramente as responsabilidades

### 2. DRY (Don't Repeat Yourself)
- **SEMPRE verifique por cÃ³digo similar antes de implementar**
- Extraia funcionalidades comuns para utilitÃ¡rios reutilizÃ¡veis
- Use o padrÃ£o de heranÃ§a ou composiÃ§Ã£o quando apropriado

### 3. Estrutura Consistente
- Mantenha a mesma estrutura de pastas para funcionalidades similares
- Use convenÃ§Ãµes de nomenclatura consistentes
- Siga o padrÃ£o jÃ¡ estabelecido no projeto: [src/](mdc:src/)

## Estrutura Atual do Projeto

### OrganizaÃ§Ã£o por Camadas
```
src/
â”œâ”€â”€ controllers/     # Endpoints da API
â”œâ”€â”€ services/        # LÃ³gica de negÃ³cio
â”œâ”€â”€ entities/        # Modelos de dados
â”œâ”€â”€ dtos/           # Objetos de transferÃªncia
â”œâ”€â”€ providers/      # IntegraÃ§Ãµes externas
â”œâ”€â”€ utils/          # UtilitÃ¡rios compartilhados
â””â”€â”€ migrations/     # MigraÃ§Ãµes do banco
```

### PadrÃµes Estabelecidos
- **Entities**: [entities/](mdc:src/entities/) - Modelos TypeORM
- **Services**: [services/](mdc:src/services/) - LÃ³gica de negÃ³cio
- **DTOs**: [dtos/](mdc:src/dtos/) - ValidaÃ§Ã£o de entrada
- **Providers**: [providers/](mdc:src/providers/) - IntegraÃ§Ãµes externas

## Checklist Antes da ImplementaÃ§Ã£o

### âœ… VerificaÃ§Ãµes ObrigatÃ³rias:
1. Existe funcionalidade similar no projeto?
2. O arquivo atual tem menos de 300 linhas?
3. A funÃ§Ã£o tem menos de 30 linhas?
4. A responsabilidade estÃ¡ bem definida?
5. Segue os padrÃµes de nomenclatura existentes?

### ğŸ”„ RefatoraÃ§Ã£o NecessÃ¡ria Quando:
- Arquivo > 300 linhas â†’ Dividir em mÃºltiplos arquivos
- FunÃ§Ã£o > 30 linhas â†’ Extrair subfunÃ§Ãµes
- CÃ³digo duplicado â†’ Criar utilitÃ¡rio compartilhado
- Responsabilidades misturadas â†’ Separar em mÃ³dulos distintos

## Exemplo de Boa Estrutura

```typescript
// âŒ Arquivo muito grande (400+ linhas)
// user.service.ts (400 linhas)

// âœ… Dividido apropriadamente
// user.service.ts (80 linhas) - operaÃ§Ãµes principais
// user-validation.service.ts (60 linhas) - validaÃ§Ãµes
// user-notification.service.ts (70 linhas) - notificaÃ§Ãµes
// user.types.ts (40 linhas) - tipos e interfaces
```

---

*Esta regra garante que o cÃ³digo permaneÃ§a limpo, organizado e fÃ¡cil de manter conforme o projeto cresce.*